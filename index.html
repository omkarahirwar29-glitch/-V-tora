<meta name='viewport' content='width=device-width, initial-scale=1'/><!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login</title>
  <style>
    body { font-family: sans-serif; background: #0d1117; color: white; display:flex; justify-content:center; align-items:center; height:100vh; }
    .box { background:#161b22; padding:30px; border-radius:10px; width:300px; }
    input { width:100%; margin:10px 0; padding:10px; border:none; border-radius:5px; }
    button { width:100%; padding:10px; border:none; border-radius:5px; background:#238636; color:white; font-weight:bold; cursor:pointer; }
    button:hover { background:#2ea043; }
  </style>
</head>
<body>
  <div class="box">
    <h2>Login</h2>
    <input type="text" id="mobile" placeholder="Enter Mobile Number">
    <input type="password" id="password" placeholder="Enter Password">
    <button id="loginBtn">Login</button>
    <button onclick="googleLogin()">Login with Google</button>
    <button onclick="window.location='register.html'">Register Page</button>
  </div>

  <script type="module" src="firebase.js"></script>
  <script type="module">
    import { signInWithEmailAndPassword, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

    document.getElementById('loginBtn').addEventListener('click', async () => {
      const mobile = document.getElementById('mobile').value.trim();
      const password = document.getElementById('password').value;

      try {
        const email = mobile + "@mail.com";
        await signInWithEmailAndPassword(auth, email, password);
        localStorage.setItem("mobile", mobile);
        window.location = "dashboard.html";
      } catch (e) {
        alert("Login Failed: " + e.message);
      }
    });

    window.googleLogin = async function() {
      const provider = new GoogleAuthProvider();
      try {
        const result = await signInWithPopup(auth, provider);
        localStorage.setItem("mobile", result.user.email);
        window.location = "dashboard.html";
      } catch (e) {
        alert("Google Login Error: " + e.message);
      }
    }
  </script>
</body>
</html>